<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="/assets/style.css" />

  <title>Document</title>
</head>

<body>
  <div data-layer="Step 4" class="Step5">
    <div data-layer="wrapper" class="Wrapper">
      <div data-layer="header" class="Header">
        <div data-layer="logo" class="Logo">
          <div data-layer="datalpine" class="Datalpine">
            <img data-layer="logo_image" class="LogoImage" src="..\tools\logo.png" />
            <img data-layer="DatLogo" class="Datlogo" src="..\tools\DatLogo.png" />
          </div>
        </div>
        <a href="https://datalpine.mx/exploradores/" data-layer="Primary BTN" class="PrimaryBtn">
          <div data-layer="Button Text" class="ButtonText">Exploradores</div>
        </a>
      </div>
    </div>
    <div data-layer="form_step" class="FormStepFoto">
      <div data-layer="titulo" class="Titulo">Foto de la propiedad</div>
      <div data-layer="desc" class="DescText">
        Asegúrese de ingresar todos los detalles, especialmente los
        obligatorios.
      </div>
      <div data-layer="step_form" class="StepForm StepForm33">
        <div data-layer="progreso" class="Progreso2 Progreso33">
          <div data-layer="steps" class="Steps">
            <div data-layer="step1_bar" class="Step1Bar">
              <div data-layer="Rectangle 4357" class="Rectangle4357 Rectangle4357Complete"></div>
            </div>

            <div data-layer="step2_bar" class="Step2BarComplete Step2BarComplete2"></div>

            <div data-layer="step3_bar" class="Step3Bar Step3BarComplete">
              <div data-layer="Rectangle 4357" class="Rectangle4358Complete"></div>
            </div>

            <div data-layer="step1_progreso" class="Step1Progreso Step1ProgresoComplete">
              <div data-layer="Ellipse 435" class="Ellipse435 Ellipse435Complete"></div>
              <div data-layer="1" class="numberOne numberOneComplete">
                <p>1</p>
              </div>
            </div>
            <div data-layer="step2_progreso" class="Step2Progreso">
              <div data-layer="Ellipse 436" class="Ellipse438 Ellipse438Complete"></div>
              <div data-layer="2" class="TwoC">
                <p>2</p>
              </div>
            </div>
            <div data-layer="step3_progreso" class="Step3Progreso Step3ProgresoYes">
              <div data-layer="Ellipse 437" class="Ellipse439 Ellipse439Complete"></div>
              <div data-layer="3" class="TreeC">
                <p>3</p>
              </div>
            </div>
            <div data-layer="step4_progreso" class="Step4Progreso">
              <div data-layer="Ellipse 437" class="Ellipse437 Ellipse437CompleteYes" k></div>
              <div data-layer="4" class="NumberFourNotCompleteYes">
                <p>4</p>
              </div>
            </div>
          </div>
        </div>
        <div data-layer="line" class="Line"></div>
        <div data-layer="step_foto" class="StepFoto">
          <div data-layer="titulo_foto" class="TituloFoto">
            <div data-layer="titulo" class="TituloFoto1">
              Fotografía de presentación
            </div>
            <div data-layer="desc" class="Desc DescTT">
              Proporcionar la imagen representativa de su propiedad
            </div>
          </div>
          <div data-layer="drop_files" class="DropFoto" id="filesDrop">
            <div data-layer="drag_n_drop" class="DragNDrop">
              <div data-layer="file-upload" class="FileUpload">
                <input type="file" id="filesInput" multiple style="display: none" />
                <div data-layer="icon_image" class="IconImage">
                  <div data-layer="Vector 129" class="Vector129"></div>
                  <div data-layer="Vector 131" class="Vector131"></div>
                  <div data-layer="Rectangle 1" class="Rectangle1"></div>
                  <div data-layer="Rectangle 2" class="Rectangle2"></div>
                  <div data-layer="Ellipse 139" class="Ellipse139"></div>
                </div>
                <div data-layer="anuncio" class="Anuncio">
                  <div data-layer="text" class="Text">
                    <div data-layer="title" class="Title">
                      <div data-layer="text" class="Text">
                        Soltar los archivos aquí o
                      </div>

                      <div data-layer="links" class="Links">
                        <div data-layer="_link-default" class="LinkDefault">
                          <div data-layer="placeholder" class="Placeholder">
                            <input type="file" id="fotoInput" accept="image/*" style="display: none" />
                            <div class="LinkText" id="fotoLink">examinar</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div data-layer="tamaño" class="Tamao">
                    Tamaño máximo: 5MB
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div data-layer="step_info" class="StepInfo">
          <div data-layer="titulo_info" class="TituloFoto">
            <div data-layer="titulo" class="TituloFoto1">
              Información de apoyo
            </div>
            <div data-layer="desc" class="DescInfo">
              Proporcionar archivos que provengan información relevante sobre
              su propiedad
            </div>
          </div>
          <div data-layer="drop_files" class="DropFoto" id="supportFilesDrop">
            <div data-layer="drag_n_drop" class="DragNDrop">
              <div data-layer="file-upload" class="FileUpload">
                <div data-layer="icon" class="IconFile">
                  <div data-layer="Vector" class="VectorFile"></div>
                  <div data-layer="icon_archive" class="IconArchive">
                    <div data-layer="Vector" class="VectorFile2"></div>
                    <div data-layer="Vector" class="VectorFile3"></div>
                  </div>
                  <div data-layer="Vector" class="VectorFile4"></div>
                  <div data-layer="Vector" class="VectorFile5"></div>
                </div>
                <div data-layer="anuncio" class="Anuncio">
                  <div data-layer="text" class="Text">
                    <div data-layer="title" class="Title">
                      Soltar los archivos aquí o
                    </div>
                    <div data-layer="links" class="Links">
                      <div data-layer="_link-default" class="LinkDefault">
                        <div data-layer="placeholder" class="Placeholder">
                          <input type="file" id="filesInput" multiple style="display: none" />
                          <div class="LinkText" id="filesLink">examinar</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-layer="navigation" class="Navigation">
        <a href="step3_casa.html" data-layer="Secondary BTN" class="SecondaryBtn">
          <div data-layer="Button Text" class="ButtonTextWhite">Anterior</div>
        </a>
        <a href="step5.html" data-layer="Primary BTN" class="PrimaryBtn">
          <div data-layer="Button Text" class="ButtonText">Siguiente</div>
        </a>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const fotos = JSON.parse(sessionStorage.getItem("fotos")) || [];
      fotos.forEach((nombre) => mostrarArchivo(nombre, "filesDrop", "fotos"));

      const apoyos = JSON.parse(sessionStorage.getItem("apoyos")) || [];
      apoyos.forEach((nombre) =>
        mostrarArchivo(nombre, "supportFilesDrop", "apoyos")
      );
    });

    document.getElementById("fotoLink").addEventListener("click", () => {
      document.getElementById("fotoInput").click();
    });

    document.getElementById("filesLink").addEventListener("click", () => {
      document.getElementById("filesInput").click();
    });

    document.getElementById("fotoInput").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        agregarArchivo(file.name, "filesDrop", "fotos");
      }
    });

    document.getElementById("filesInput").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        agregarArchivo(file.name, "supportFilesDrop", "apoyos");
      }
    });

    function agregarArchivo(nombre, contenedorID, storageKey) {
      const archivos = JSON.parse(sessionStorage.getItem(storageKey)) || [];
      if (!archivos.includes(nombre)) {
        archivos.push(nombre);
        sessionStorage.setItem(storageKey, JSON.stringify(archivos));
        mostrarArchivo(nombre, contenedorID, storageKey);
      }
    }

    function mostrarArchivo(nombre, contenedorID, storageKey) {
      const container = document.getElementById(contenedorID);

      const div = document.createElement("div");
      div.textContent = `Archivo: ${nombre}`;
      div.style.border = "1px solid #ccc";
      div.style.padding = "6px";
      div.style.margin = "4px";
      div.style.display = "flex";
      div.style.justifyContent = "space-between";
      div.style.alignItems = "center";

      const btn = document.createElement("button");
      btn.textContent = "Eliminar";
      btn.style.marginLeft = "10px";
      btn.onclick = () => {
        div.remove();
        const archivos = JSON.parse(sessionStorage.getItem(storageKey)) || [];
        const actualizados = archivos.filter((item) => item !== nombre);
        sessionStorage.setItem(storageKey, JSON.stringify(actualizados));
      };

      div.appendChild(btn);
      container.appendChild(div);
    }


    const dropAreaFoto = document.getElementById("filesDrop");
    dropAreaFoto.addEventListener("dragover", (e) => {
      e.preventDefault();
      dropAreaFoto.style.border = "2px dashed #8DFF00";
    });

    dropAreaFoto.addEventListener("dragleave", () => {
      dropAreaFoto.style.border = "none";
    });

    dropAreaFoto.addEventListener("drop", (e) => {
      e.preventDefault();
      dropAreaFoto.style.border = "none";
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        const file = files[0];
        agregarArchivo(file.name, "filesDrop", "fotos");
      }
    });

    const dropAreaApoyo = document.getElementById("supportFilesDrop");
    dropAreaApoyo.addEventListener("dragover", (e) => {
      e.preventDefault();
      dropAreaApoyo.style.border = "2px dashed #8DFF00";
    });

    dropAreaApoyo.addEventListener("dragleave", () => {
      dropAreaApoyo.style.border = "none";
    });

    dropAreaApoyo.addEventListener("drop", (e) => {
      e.preventDefault();
      dropAreaApoyo.style.border = "none";
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        const file = files[0];
        agregarArchivo(file.name, "supportFilesDrop", "apoyos");
      }
    });
  </script>

  <script src="/form/script.js"></script>
</body>

</html>